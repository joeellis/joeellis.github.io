<!DOCTYPE html> <html> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width initial-scale=1"> <title>Debugging Dependencies Locally | joeellis.la</title> <meta property="og:title" content="Debugging Dependencies Locally"/> <meta name="author" content="Joe Ellis"/> <meta property="og:locale" content="en_US"/> <meta name="description" content="Elixir and Mix make it dead simple to debug dependencies."/> <meta property="og:description" content="Elixir and Mix make it dead simple to debug dependencies."/> <link rel="canonical" href="http://joeellis.la/debugging-dependencies-locally/"/> <meta property="og:url" content="http://joeellis.la/debugging-dependencies-locally/"/> <meta property="og:site_name" content="joeellis.la"/> <meta property="og:type" content="article"/> <meta property="article:published_time" content="2017-07-08T00:00:00-05:00"/> <meta name="twitter:card" content="summary"/> <meta name="twitter:site" content="@notjoellis"/> <meta name="twitter:creator" content="@Joe Ellis"/> <script type="application/ld+json">
{"@context":"http://schema.org","@type":"BlogPosting","headline":"Debugging Dependencies Locally","author":{"@type":"Person","name":"Joe Ellis"},"datePublished":"2017-07-08T00:00:00-05:00","dateModified":"2017-07-08T00:00:00-05:00","description":"Elixir and Mix make it dead simple to debug dependencies.","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://joeellis.la/assets/images/avatar.png"},"name":"Joe Ellis"},"mainEntityOfPage":{"@type":"WebPage","@id":"http://joeellis.la/debugging-dependencies-locally/"},"url":"http://joeellis.la/debugging-dependencies-locally/"}</script> <link rel="stylesheet" href="/css/main.css"> <link rel="alternate" type="application/atom+xml" title="joeellis.la" href="http://joeellis.la/feed.xml"/> <link rel="canonical" href="http://joeellis.la/debugging-dependencies-locally/"> <link href="https://fonts.googleapis.com/css?family=Droid+Serif|PT+Sans" rel="stylesheet"> <meta content="Elixir and Mix make it dead simple to debug dependencies." property="description"> <meta property="og:image" content="http://joeellis.la/assets/images/avatar.png"> <meta property="article:tag" content="elixir"> <meta name="twitter:title" content="Debugging Dependencies Locally"> <meta name="twitter:description" content="Elixir and Mix make it dead simple to debug dependencies."> <meta name="twitter:image" content="http://joeellis.la/assets/images/avatar.png"> </head> <body> <div class="header-container"> <nav class="site-nav"> <div class="trigger"> <a class="page-link" href="/feed.xml">RSS</a> </div> </nav> </div> <div class="wrapper"> <div class="page-content"> <div class="header-intro"> <div class="intro-details"> <div class="intro-photo"> <a href="http://joeellis.la"> <img class="avatar-photo" src="/assets/images/avatar.png" width="55" height="55"/> </a> </div> <p class="intro-description"> <a href="http://joeellis.la">My name is Joe Ellis and I am a full stack developer in New Orleans, interested all things Elixir, Ruby, and Javascript.</a> </p> </div> </div> <hr/> <div class="post"> <header class="post-header"> <h1 class="post-title">Debugging Dependencies Locally</h1> <p class="post-meta">July 8, 2017</p> </header> <article class="post-content"> <p>Have you ever needed to debug a dependency, perhaps to track down a bug or maybe just to see how it works? In scripted languages like Ruby or JS, you can usually add debug statements, like <code class="highlighter-rouge">puts "test"</code> or <code class="highlighter-rouge">console.log("test")</code>, to the dependency’s code and see the output the next time you run your app.</p> <p>This does not quite work in an Elixir / Mix project as dependencies are compiled and usually compiled just once, when they are fetched. Fortunately for us, [<code class="highlighter-rouge">mix</code>](https://hexdocs.pm/mix/Mix.html (Elixir’s build tool) gives us an option called <code class="highlighter-rouge">path</code>, to automatically recompile a dependency whenever it changes. Simply declare the <code class="highlighter-rouge">path</code> option with your dependency in your project’s <code class="highlighter-rouge">mix.exs</code> like so:</p> <figure class="highlight"><pre><code class="language-elixir" data-lang="elixir"><span class="k">defp</span> <span class="n">deps</span> <span class="k">do</span>
  <span class="p">[</span>
    <span class="o">...</span>
    <span class="p">{</span><span class="ss">:my_dep</span><span class="p">,</span> <span class="s1">'~&gt; 1.0.0'</span><span class="p">,</span> <span class="ss">path:</span> <span class="s1">'deps/my_dep'</span><span class="p">}</span>
    <span class="o">...</span>
  <span class="p">]</span>
<span class="k">end</span></code></pre></figure> <p>This tells <code class="highlighter-rouge">mix</code> to look at the <code class="highlighter-rouge">deps/my_dep</code> folder for that dependency when compiling, and recompile it (and related project files) anytime a change is detected. Now you can open up the code at <code class="highlighter-rouge">deps/my_dep</code>, add your debug statements, and explore away!</p> <h3 id="absolute--relative-paths">Absolute &amp; Relative Paths</h3> <p>Note that the <code class="highlighter-rouge">path</code> option isn’t limited to looking at the <code class="highlighter-rouge">deps</code> folder, and also accepts relative and absolute system paths, like so:</p> <figure class="highlight"><pre><code class="language-elixir" data-lang="elixir"><span class="k">defp</span> <span class="n">deps</span> <span class="k">do</span>
  <span class="p">[</span>
    <span class="o">...</span>
    <span class="p">{</span><span class="ss">:my_dep</span><span class="p">,</span> <span class="s1">'~&gt; 1.0.0'</span><span class="p">,</span> <span class="ss">path:</span> <span class="s1">'../path/to/my/local/my_dep'</span><span class="p">}</span>
    <span class="o">...</span>
  <span class="p">]</span>
<span class="k">end</span></code></pre></figure> <p>This is particularly useful if you are developing a new Hex package along side your project, or if you want to clone a package locally to track your changes and submit patches to the original author later.</p> <h3 id="reset-the-dependency">Reset the Dependency</h3> <p>Once you’re finished debugging and want to restore the dependency to it’s normal state, simply clean it out and re-fetch it by running:</p> <figure class="highlight"><pre><code class="language-elixir" data-lang="elixir"><span class="n">mix</span> <span class="k">do</span> <span class="n">deps</span><span class="o">.</span><span class="n">clean</span> <span class="n">my_dep</span><span class="p">,</span> <span class="n">deps</span><span class="o">.</span><span class="n">get</span><span class="p">,</span> <span class="n">compile</span></code></pre></figure> <p>And everything will be reset back to how it was in the beginning.</p> </article> <hr> <div class="question"> <a class="twitter-follow-button" href="https://twitter.com/notjoeellis" data-show-count="true" data-size="large"> Follow @notjoeellis </a> <script type="text/javascript">window.twttr=function(t,e,r){var n,i,w=t.getElementsByTagName(e)[0];if(!t.getElementById(r))return i=t.createElement(e),i.id=r,i.src="https://platform.twitter.com/widgets.js",w.parentNode.insertBefore(i,w),window.twttr||(n={_e:[],ready:function(t){n._e.push(t)}})}(document,"script","twitter-wjs");</script> </div> </div> </div> <footer class="site-footer"> <p class="small">joeellis.la &copy; 2017</p> </footer> </div> </body> <script>!function(e,t,a,n,c,s,o){e.GoogleAnalyticsObject=c,e[c]=e[c]||function(){(e[c].q=e[c].q||[]).push(arguments)},e[c].l=1*new Date,s=t.createElement(a),o=t.getElementsByTagName(a)[0],s.async=1,s.src=n,o.parentNode.insertBefore(s,o)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-99074897-1","auto"),ga("send","pageview");</script> </html>